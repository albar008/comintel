{"version":3,"file":"project-container/index.js","mappings":"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","sources":["webpack://comintel-business-theme/./node_modules/clsx/dist/clsx.mjs","webpack://comintel-business-theme/./src/project-container/edit.js","webpack://comintel-business-theme/./src/project-container/save.js","webpack://comintel-business-theme/external window [\"wp\",\"apiFetch\"]","webpack://comintel-business-theme/external window [\"wp\",\"blockEditor\"]","webpack://comintel-business-theme/external window [\"wp\",\"blocks\"]","webpack://comintel-business-theme/external window [\"wp\",\"components\"]","webpack://comintel-business-theme/external window [\"wp\",\"data\"]","webpack://comintel-business-theme/external window [\"wp\",\"element\"]","webpack://comintel-business-theme/external window [\"wp\",\"url\"]","webpack://comintel-business-theme/external window \"lodash\"","webpack://comintel-business-theme/external window \"ReactJSXRuntime\"","webpack://comintel-business-theme/webpack/bootstrap","webpack://comintel-business-theme/webpack/runtime/compat get default export","webpack://comintel-business-theme/webpack/runtime/define property getters","webpack://comintel-business-theme/webpack/runtime/hasOwnProperty shorthand","webpack://comintel-business-theme/webpack/runtime/make namespace object","webpack://comintel-business-theme/./src/project-container/index.js"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { includes as _includes, set } from \"lodash\";\nimport { useEffect } from \"@wordpress/element\";\nimport { createBlock } from \"@wordpress/blocks\";\nimport { addQueryArgs } from \"@wordpress/url\";\nimport { useSelect, useDispatch } from \"@wordpress/data\";\nimport apiFetch from \"@wordpress/api-fetch\";\nimport { Button } from \"@wordpress/components\";\nimport { useBlockProps, InnerBlocks } from \"@wordpress/block-editor\";\n\nexport default function Edit({ attributes, setAttributes, clientId }) {\n  const blockProps = useBlockProps();\n  const { insertBlock } = useDispatch(\"core/block-editor\");\n  const { lockPostSaving, unlockPostSaving } = useDispatch(\"core/editor\");\n  const { createErrorNotice } = useDispatch(\"core/notices\");\n\n  const postId = useSelect((select) => {\n    return select(\"core/editor\").getCurrentPostId();\n  }, []);\n\n  const block = useSelect((select) => {\n    return select(\"core/block-editor\").getBlock(clientId);\n  }, []);\n\n  const _addProject = () => {\n    insertBlock(\n      createBlock(\"comintel-business-component/project-list\", {\n        project: \"\",\n      }),\n      block.innerBlocks.length,\n      clientId\n    );\n  };\n\n  const _setProjectOptions = (projects) => {\n    const innerProjectAttr = block.innerBlocks?.map(\n      (innerBlock) => innerBlock.attributes.project\n    );\n    const newProjects = projects?.map((project) => {\n      const isSelected = project?.value\n        ? _includes(innerProjectAttr, project.value + \"\")\n        : false;\n      return {\n        ...project,\n        disabled: !!isSelected,\n      };\n    });\n    setAttributes({\n      projects: newProjects,\n    });\n  };\n\n  useEffect(() => {\n    const innerProjectAttr = block.innerBlocks?.map(\n      (innerBlock) => innerBlock.attributes.project\n    );\n    _setProjectOptions(attributes.projects);\n    if (innerProjectAttr?.length === 0 || (innerProjectAttr?.length > 0 && !innerProjectAttr.includes(\"\"))) {\n      unlockPostSaving(\"projectlock\");\n    } else {\n      lockPostSaving(\"projectlock\");\n      createErrorNotice(\n        \"Please select at least one project. You can't save this post until you select a project or remove it.\",\n        {\n          type: \"snackbar\",\n          icon: \"‼️\",\n          isDismissible: true,\n          id: \"project-error-notice\",\n        }\n      );\n    }\n  }, [block.innerBlocks]);\n\n  // Fetch project data\n  useEffect(() => {\n    (async () => {\n      const response = await apiFetch({\n        path: addQueryArgs(`/project/v1/show-projects`, {\n          curr_post_id: postId,\n        }),\n      });\n      const projectsData = response.results?.map((project) => {\n        return {\n          value: project.id,\n          label: project.title,\n        };\n      });\n      _setProjectOptions(\n        [{ value: \"\", label: \"Select Project\" }].concat(projectsData)\n      );\n    })();\n  }, [postId]);\n\n  return (\n    <div {...blockProps}>\n      <InnerBlocks renderAppender={false} />\n      <Button\n        disabled={block.innerBlocks.length >= 6}\n        variant=\"primary\"\n        onClick={_addProject}\n      >\n        Tambah Referensi Project\n      </Button>\n    </div>\n  );\n}\n","import { Fragment } from '@wordpress/element';\nimport { useBlockProps, InnerBlocks } from \"@wordpress/block-editor\";\nimport clsx from \"clsx\";\n\nexport default function Save({ attributes }) {\n  const blockProps = useBlockProps.save();\n  return (\n    <Fragment {...blockProps}>\n      <InnerBlocks.Content />\n    </Fragment>\n  );\n}\n","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"lodash\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {registerBlockType} from '@wordpress/blocks';\nimport { InnerBlocks } from \"@wordpress/block-editor\";\nimport metadata from './block.json';\nimport Edit from './edit';\nimport save from './save';\n\nregisterBlockType(metadata.name, {  \n  edit: Edit,\n  save\n});"],"names":["includes","_includes","set","useEffect","createBlock","addQueryArgs","useSelect","useDispatch","apiFetch","Button","useBlockProps","InnerBlocks","jsx","_jsx","jsxs","_jsxs","Edit","attributes","setAttributes","clientId","blockProps","insertBlock","lockPostSaving","unlockPostSaving","createErrorNotice","postId","select","getCurrentPostId","block","getBlock","_addProject","project","innerBlocks","length","_setProjectOptions","projects","innerProjectAttr","map","innerBlock","newProjects","isSelected","value","disabled","type","icon","isDismissible","id","response","path","curr_post_id","projectsData","results","label","title","concat","children","renderAppender","variant","onClick","Fragment","clsx","Save","save","Content","registerBlockType","metadata","name","edit"],"sourceRoot":""}