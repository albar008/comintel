(()=>{"use strict";var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.blocks,n=JSON.parse('{"UU":"comintel-business/general-content-container"}'),t=window.wp.element,o=window.wp.apiFetch;var s=e.n(o);const i=window.wp.components,a=window.wp.blockEditor;function l(e){var r,n,t="";if("string"==typeof e||"number"==typeof e)t+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(n=l(e[r]))&&(t&&(t+=" "),t+=n)}else for(n in e)e[n]&&(t&&(t+=" "),t+=n);return t}const c=function(){for(var e,r,n=0,t="",o=arguments.length;n<o;n++)(e=arguments[n])&&(r=l(e))&&(t&&(t+=" "),t+=r);return t},d=window.ReactJSXRuntime;(0,r.registerBlockType)(n.UU,{edit:function({attributes:e,setAttributes:r}){const n=c({"section-container":!0,"position-relative":e?.bgImgId}),o=(0,a.useBlockProps)({className:n}),l=c("row",e?.className),{children:g,...u}=(0,a.useInnerBlocksProps)({className:l});return(0,t.useEffect)((()=>{!async function(){if(e?.bgImgId)try{const n=await s()({path:"/wp/v2/media/"+e.bgImgId});r({bgImgUrlLarge:n?.media_details?.sizes?.large?.source_url,bgImgUrlThumb:n?.media_details?.sizes?.thumbnail?.source_url})}catch(e){console.log("ERROR",e)}finally{r({backgroundColor:null})}}()}),[e?.bgImgId]),(0,t.useEffect)((()=>{e?.backgroundColor&&r({bgImgId:null,bgImgUrlLarge:null,bgImgUrlThumb:null})}),[e?.backgroundColor]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.InspectorControls,{children:(0,d.jsxs)(i.PanelBody,{title:"Background Image",children:[e?.bgImgId&&(0,d.jsx)(i.PanelRow,{children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,d.jsx)("img",{src:e?.bgImgUrlThumb,width:150,height:150,alt:"bg image thumb"}),(0,d.jsx)(i.Button,{icon:"trash",label:"Delete Background",isDestructive:!0,onClick:()=>{r({bgImgId:void 0,bgImgUrlLarge:void 0,bgImgUrlThumb:void 0})}})]})}),(0,d.jsx)(i.PanelRow,{children:(0,d.jsx)(a.MediaUploadCheck,{children:(0,d.jsx)(a.MediaUpload,{onSelect:e=>{r({bgImgId:e.id})},value:e?.bgImgId,render:({open:e})=>(0,d.jsx)(i.Button,{variant:"primary",onClick:e,children:"Select Background"})})})})]})}),(0,d.jsxs)("section",{...o,children:[e?.bgImgId&&(0,d.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",backgroundImage:`url(${e?.bgImgUrlLarge})`,backgroundSize:"cover",left:0,top:0,backgroundRepeat:"no-repeat",opacity:.3,zIndex:0}}),(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{...u,children:g})})]})]})},save:function({attributes:e}){const r=c({"section-container":!0,"position-relative":e?.bgImgId}),n=a.useBlockProps.save({className:r}),t=c("row",e?.className),{children:o,...s}=a.useInnerBlocksProps.save({className:t});return(0,d.jsxs)("section",{...n,children:[e?.bgImgId&&(0,d.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",backgroundImage:`url(${e?.bgImgUrlLarge})`,backgroundSize:"cover",left:0,top:0,backgroundRepeat:"no-repeat",opacity:.3,zIndex:-1}}),(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{...s,children:o})})]})}})})();